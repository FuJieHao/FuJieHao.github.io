<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>éƒå¯Œæ°çš„åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="éƒå¯Œæ°çš„åšå®¢">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="éƒå¯Œæ°çš„åšå®¢">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="éƒå¯Œæ°çš„åšå®¢">
  
    <link rel="alternative" href="/atom.xml" title="éƒå¯Œæ°çš„åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/smallIcon.jpg">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/icon.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">éƒå¯Œæ°</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        <li>å‹æƒ…é“¾æ¥</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home">åšå®¢é¦–é¡µ</a></li>
                        
                            <li><a href="/works">ä½œå“å±•ç¤º</a></li>
                        
                            <li><a href="/about">ç•™è¨€æ‰“å¡</a></li>
                        
                            <li><a href="/FrontEndGuide">å‰ç«¯å¯¼èˆª</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/FuJieHao" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="#" title="weibo">weibo</a>
                            
                                <a class="fl QQ" target="_blank" href="/1205472604" title="QQ">QQ</a>
                            
                                <a class="fl wechat" target="_blank" href="#" title="wechat">wechat</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">çº¯æµ·è¿·ã€çˆ±è¿åŠ¨ã€çˆ±äº¤å‹ã€çˆ±æ—…è¡Œã€å–œæ¬¢æ¥è§¦æ–°é²œäº‹ç‰©ã€è¿æ¥æ–°çš„æŒ‘æˆ˜ï¼Œæ›´çˆ±æ¸¸ç¦»äºé”™ç»¼å¤æ‚çš„ç¼–ç ä¸é€»è¾‘ä¸­</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">éƒå¯Œæ°</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/icon.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">éƒå¯Œæ°</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home">åšå®¢é¦–é¡µ</a></li>
                
                    <li><a href="/works">ä½œå“å±•ç¤º</a></li>
                
                    <li><a href="/about">ç•™è¨€æ‰“å¡</a></li>
                
                    <li><a href="/FrontEndGuide">å‰ç«¯å¯¼èˆª</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/FuJieHao" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
                    
                        <a class="QQ" target="_blank" href="/1205472604" title="QQ">QQ</a>
                    
                        <a class="wechat" target="_blank" href="#" title="wechat">wechat</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-iOSå¼€å‘ä¹‹ç”¨æˆ·ä¿¡æ¯åŠ å¯†" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/22/iOSå¼€å‘ä¹‹ç”¨æˆ·ä¿¡æ¯åŠ å¯†/" class="article-date">
      <time datetime="2016-10-22T00:26:54.000Z" itemprop="datePublished">2016-10-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/22/iOSå¼€å‘ä¹‹ç”¨æˆ·ä¿¡æ¯åŠ å¯†/">iOSå¼€å‘ä¹‹ç”¨æˆ·ä¿¡æ¯åŠ å¯†</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <font size="2">è°ˆåŠç½‘ç»œå®‰å…¨ï¼Œæˆ‘æƒ³ä¸å°‘è“å­©å­éƒ½ä¼šæˆ–å¤šæˆ–å°‘æ„Ÿç‚¹å…´è¶£ï¼Œé»‘å®¢ä¸å°±å¹²è¿™ä¸ªçš„ã€‚ã€‚<br>               ä¸é”™å˜›ï¼Œå¹´è½»äººï¼Œå¾ˆæœ‰æƒ³æ³•ã€‚ä¸è¿‡ï¼Œè¿™é‡Œè¦è®²çš„ç”¨æˆ·ä¿¡æ¯åŠ å¯†è·Ÿé‚£ä¸ªæ¯”ï¼Œæœ‰ç‚¹å°å„¿ç§‘ã€‚å“ˆå“ˆâ€¦â€¦</font>

<p><font size="2">ä¸è¿‡è¯è¯´ï¼Œå•¥ç©æ„å„¿éœ€è¦åŠ å¯†ï¼Œç™»å½•ï¼Œæ³¨å†Œï¼Œå·´æ‹‰å·´æ‹‰çš„â€¦â€¦(âŠ™vâŠ™)å—¯ï¼Œè®©æœ¬å±Œä¸æ¦‚æ‹¬ä¸€ä¸‹ï¼Œä¸€èˆ¬POSTè¯·æ±‚è¯·æ±‚ä½“é‡Œçš„ä¸œè¥¿éƒ½éœ€è¦åŠ å¯†ï¼ŒGETè¯·æ±‚æš´æ¼åœ¨å¤–é¢æœ€å¤šæœ‰é—²çš„æ— èŠçš„å†™ä¸ªçˆ¬è™«æˆªå–ä¸€ä¸‹ï¼Œåªæœ‰POSTè¯·æ±‚ä½“é‡Œæ‰æ˜¯æœ‰è¥å…»çš„</font></p>
<blockquote>
<p>ç²—ç•¥çš„è¯´ä¸‹åŠ å¯†æ€ä¹ˆæï¼š</p>
</blockquote>
<pre><code>æ€»ä½“æ¥è¯´ï¼šå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨ç›¸åŒçš„åŠ å¯†ç®—æ³•ï¼Œç”±æœåŠ¡å™¨ç«¯æŒ‡å®šåŠ å¯†ç®—æ³•ï¼›æœåŠ¡å™¨ä¿å­˜å¯†ç çš„æš—æ–‡ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨åŒ¹é…çš„æ˜¯æš—æ–‡ã€‚è¿™æ ·å°±å¯ä»¥é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œè¢«æŠ“åŒ…ç ´è§£ï¼Œå› ä¸ºåŠ å¯†åçš„ä¸œè¥¿ï¼ŒæŠ“åˆ°ä¹Ÿçœ‹ä¸æ‡‚ã€‚
é‚£ä¹ˆï¼šä»€ä¹ˆæ—¶å€™è¦åŠ å¯†
    1.å¯†ç åœ¨ç½‘ç»œä¸­ä¼ è¾“ä¹‹å‰è¦åŠ å¯†
    2.å¯†ç åœ¨ä¿å­˜åˆ°æœ¬åœ°ä¹‹å‰è¦åŠ å¯†
    ä»€ä¹ˆæ—¶å€™éœ€è¦è§£å¯†
    å¯†ç åœ¨ä»æœ¬åœ°è¯»å–å‡ºæ¥ä¹‹åè¦è§£å¯†
</code></pre><blockquote>
<p>å…ˆç”¨æœ€åŸºæœ¬çš„base64æ¼”ç¤ºä¸€ä¸‹ï¼ˆå½“ç„¶çœŸå®å¼€å‘ä¸­ï¼Œæ²¡äººç”¨ï¼‰ï¼Œå› ä¸ºå¤ªç®€å•äº†</p>
</blockquote>
<pre><code>è¿™é‡Œä¸è°ˆè¿™ä¸ªæ•°æ®æ˜¯å¦‚ä½•åŠ å¯†çš„ï¼Œè¿™ä¸ªå¯ä»¥ç™¾åº¦çš„åˆ°ï¼Œè€Œä¸”å¹¶ä¸å¤æ‚ã€‚å¯¹äºç§»åŠ¨ç«¯äººå‘˜æ¥è¯´ï¼Œæˆ‘ä»¬é¦–è¦çŸ¥é“çš„æ˜¯è¿™ä¸ªè¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼ˆä¹Ÿå°±æ˜¯ä¼ è¯´ä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼‰
ï¼ˆå¦‚æœå¯ç”¨ä¿å­˜è´¦å·å¯†ç ï¼‰é¦–å…ˆç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œå°±è¦è¯»å–ç”¨æˆ·çš„ä¿¡æ¯ã€‚ä¸ç®¡æ˜¯keyChainè¿˜æ˜¯NSUserDefaultséƒ½å¯ä»¥çš„ã€‚
ç„¶åå¦‚æœä¸ºç©ºçš„è¯ï¼Œæˆ‘å°±è¦æ‰‹åŠ¨è¾“å…¥ï¼Œå¦‚æœä¸ä¸ºç©ºçš„è¯ï¼Œå°±è¦è§£å¯†å‡ºæ¥æ˜¾ç¤ºï¼ˆé‚£äº›ä¸ªé»‘ç‚¹ç‚¹ï¼‰
ç„¶åç™»é™†çš„æ—¶å€™ï¼Œæˆ‘æŠŠæ–‡æœ¬æ¡†é‡Œçš„å¯†ç åŠ å¯†ï¼Œç„¶åå’Œç”¨æˆ·åä¸€èµ·é€šè¿‡POSTè¯·æ±‚ä¸€é“å‘é€ç»™æœåŠ¡å™¨ã€‚
ä¹‹å‰åœ¨æ³¨å†Œçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ‹¿åˆ°å¯†ç çš„æš—æ–‡ï¼Œç„¶åè¿™æ—¶å°†æš—æ–‡è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœå‡ç›¸åŒï¼Œåˆ™ç™»é™†æˆåŠŸï¼Œå¦åˆ™ç™»é™†å¤±è´¥
</code></pre><h3 id="ç„¶åæŒ‚ç‚¹ä»£ç "><a href="#ç„¶åæŒ‚ç‚¹ä»£ç " class="headerlink" title="ç„¶åæŒ‚ç‚¹ä»£ç "></a>ç„¶åæŒ‚ç‚¹ä»£ç </h3><blockquote>
<pre><code>è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">- (void)readUserInfo</div><div class="line">&#123;</div><div class="line">    // ä¿å­˜åˆ°åå¥½è®¾ç½®</div><div class="line">    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</div><div class="line"></div><div class="line">    // è¯»å–ç”¨æˆ·å</div><div class="line">    self.usernameTextField.text = [defaults objectForKey:K_username];</div><div class="line"></div><div class="line">    // è¯»å–å¯†ç  : å­˜è¿›å»çš„æš—æ–‡,è¯»å–çš„ä¹Ÿæ˜¯æš—æ–‡,è¯»å–å‡ºæš—æ–‡ä¹‹å,éœ€è¦è§£å¯†å‡ºæ˜æ–‡</div><div class="line">    NSString *psd = [defaults objectForKey:K_password];</div><div class="line">    NSString *psd_Decode = [self base64Decode:psd];</div><div class="line"></div><div class="line">    self.passwordTextField.text = psd_Decode;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/// ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸»æ–¹æ³•</div><div class="line">- (void)saveUserInfo</div><div class="line">&#123;</div><div class="line">    // ä¿å­˜åˆ°åå¥½è®¾ç½® : iOS8.0ä¹‹åå°±ä¸ç”¨è°ƒç”¨ç«‹å³å†™å…¥çš„æ–¹æ³• (ä¸å®‰å…¨çš„ä¿å­˜æ–¹å¼)</div><div class="line">    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</div><div class="line"></div><div class="line">    // ä¿å­˜ç”¨æˆ·å</div><div class="line">    [defaults setObject:self.usernameTextField.text forKey:K_username];</div><div class="line"></div><div class="line">    // ä¿å­˜å¯†ç  : å¯†ç ä¿å­˜åˆ°æœ¬åœ°ä¹‹å‰è¦åŠ å¯†</div><div class="line">    NSString *psd_encode = [self base64Encode:self.passwordTextField.text];</div><div class="line">    [defaults setObject:psd_encode forKey:K_password];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<pre><code>åŠ å¯†å’Œè§£å¯†çš„æ–¹æ³•
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (NSString *)base64Encode:(NSString *)str</div><div class="line">&#123;</div><div class="line">    // 1.æŠŠå­—ç¬¦ä¸²è½¬æˆäºŒè¿›åˆ¶</div><div class="line">    NSData *data = [str dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line">    // 2.æŠŠäºŒè¿›åˆ¶è¿›è¡Œbase64ç¼–ç ,è¿”å›ç¼–ç ä¹‹åçš„å­—ç¬¦ä¸²</div><div class="line">    NSString *encodeStr = [data base64EncodedStringWithOptions:0];</div><div class="line">    // 3.è¿”å›ç¼–ç ä¹‹åçš„å­—ç¬¦ä¸²</div><div class="line">    return encodeStr;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSString *)base64Decode:(NSString *)encodeStr</div><div class="line">&#123;</div><div class="line">    // 1.æŠŠç¼–ç ä¹‹åçš„å­—ç¬¦ä¸²,è§£ç æˆäºŒè¿›åˆ¶</div><div class="line">    NSData *data = [[NSData alloc] initWithBase64EncodedString:encodeStr options:0];</div><div class="line">    // 2.æŠŠè§£ç ä¹‹åçš„äºŒè¿›åˆ¶,è½¬æˆå­—ç¬¦ä¸²</div><div class="line">    NSString *decodeStr = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];</div><div class="line">    // 3.è¿”å›è§£ç ä¹‹åçš„å­—ç¬¦ä¸²</div><div class="line">    return decodeStr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
<p>å‰©ä¸‹çš„åŒ¹é…åˆ¤æ–­å°±ä¸æŒ‚äº†ï¼Œçœç‚¹ç©ºé—´ï¼Œé‚£ä¸œè¥¿åŠ ä¸åŠ å¯†éƒ½æ˜¯ä¸å˜çš„</p>
<blockquote>
<p>ç„¶åè¯¥è¯´è¯´MD5åŠ å¯†äº†ã€‚</p>
</blockquote>
<pre><code>åœ¨æˆ‘ä»¬çœ‹æ¥å·²ç»è¶³å¤Ÿçš„åŠ å¯†ç®—æ³•ï¼Œæ€»è¿˜æ˜¯æœ‰å¤§ç¥å¯ä»¥ç ´è§£çš„ï¼Œå³ä¾¿ä¼ è¯´çš„MD5ç®—æ³•ï¼Œæ‰€ä»¥åæ¥å¼€å§‹è¿›è¡ŒåŠ ç›ï¼Œå°±æ˜¯æ˜æ–‡åŠ ç›ï¼ŒMD5è®¡ç®—ï¼Œè¿™æ ·å¯èƒ½è¿˜ä¸å®‰å…¨ï¼Œè¿˜å¯ä»¥æŠŠåŠ å¯†ç»“æœåŠ ç›å†è¿›è¡ŒMD5åŠ å¯†ã€‚
è¿˜æœ‰çš„å…¬å¸è®¾è®¡äº†è‡ªå·±çš„åŠ å¯†ç®—æ³•ï¼Œè­¬å¦‚16ä½åŠ å¯†ï¼Œ64ä½åŠ å¯†â€¦â€¦å½“ç„¶äº†ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬çš„äº‹ï¼Œè€Œä¸”å±äºæœºå¯†é—®é¢˜ã€‚
è¿˜æœ‰å°±æ˜¯è¿™ç§çš„ç®—æ³•ä¸€èˆ¬å†™åœ¨åˆ†ç±»ä¸­ã€‚
</code></pre><h3 id="è­¬å¦‚è¿™æ ·"><a href="#è­¬å¦‚è¿™æ ·" class="headerlink" title="è­¬å¦‚è¿™æ ·"></a>è­¬å¦‚è¿™æ ·</h3><p><img src="Img/3.png" alt=""></p>
<blockquote>
<p>ç»§ç»­å‘¢å°±è¿˜æœ‰ä¸€ä¸ªé’¥åŒ™ä¸²çš„åŠ å¯†ï¼Œè¿™ä¸ªæ˜¯ğŸç‹¬åˆ›çš„ã€‚</p>
</blockquote>
<pre><code>é’¥åŒ™ä¸²çš„ç‰¹ç‚¹å°±æ˜¯è‡ªåŠ¨åŠ å¯†ï¼Œè‡ªåŠ¨è§£å¯†ï¼Œåˆ«çš„ä¸ç”¨å…³å¿ƒã€‚
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//å­˜</div><div class="line">[SSKeychain setPassword:self.passwordTextField.text forService:[NSBundle mainBundle].bundleIdentifier account:self.usernameTextField.text];</div><div class="line"></div><div class="line">//å–</div><div class="line">self.passwordTextField.text = [SSKeychain passwordForService:[NSBundle mainBundle].bundleIdentifier account:self.usernameTextField.text];</div></pre></td></tr></table></figure>
<p>å‰ææ˜¯å¯¼å…¥ä¸ªSSKeychainçš„æ–‡ä»¶å¤¹ï¼Œç½‘ä¸Šå¯ä»¥æ‰¾å¾—åˆ°çš„<br>æ¸©é¦¨æç¤ºæ˜¯ï¼šä¸è¦æŠŠMD5æ•´ä¸€å †åæ”¾åœ¨æœ¬åœ°ï¼Œå› ä¸ºä½ ä¸èƒ½é€†å‘è§£å¯†ã€‚ã€‚</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JSä¸OCäº¤äº’" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/21/JSä¸OCäº¤äº’/" class="article-date">
      <time datetime="2016-10-21T09:11:01.000Z" itemprop="datePublished">2016-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/21/JSä¸OCäº¤äº’/">JSä¸OCçš„äº¤äº’ä½¿ç”¨</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
          <font size="2">JSä¸OCä¸ºä»€ä¹ˆè¦äº¤äº’ï¼ŸiOSå¼€å‘ä¸ºä»€ä¹ˆè¦ç”¨å‰ç«¯çš„ä¸œè¥¿ï¼ŸJSä¸OCçš„äº¤äº’åœ¨å“ªé‡Œç”¨å¾—åˆ°ï¼Ÿ</font><br>  <font size="1">å…ˆå›ç­”è¿™ä¸‰ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦äº¤äº’ï¼Œå› ä¸ºé¦–å…ˆæ¥è¯´çš„è¯ï¼Œæˆ‘ä»¬çš„åº”ç”¨å¼€å‘å®Œæˆä¸Šæ¶ä»¥åï¼Œè¿‡ä¸€æ®µæ—¶é—´ï¼Œå°±å¯èƒ½æœ‰æ‰€å˜åŒ–äº†ä»€ä¹ˆçš„ï¼Œå¦‚æœæ˜¯çº¯OC/Swiftçš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å˜åŒ–å°±éœ€è¦ç‰ˆæœ¬æ›´æ–°ï¼Œé‡æ–°ä¸Šæ¶ï¼Œå®¡æ ¸â€¦â€¦æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”æœ‰çš„æ—¶å€™ï¼Œä»…ä»…æ˜¯ä¸€ä¸ç‚¹çš„æ”¹åŠ¨ã€‚è€Œå¦‚æœæˆ‘ä»¬åŠ è½½ç½‘é¡µçš„è¯ï¼Œå¦‚æœåŒä¸€ä¸ªç½‘é¡µé‡Œçš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬çš„ç‰ˆæœ¬ä¸éœ€è¦æ›´æ–°ï¼Œå°±ä¼šè¾¾åˆ°ç›¸åº”çš„æ•ˆæœï¼Œè¿™ä¹Ÿæ˜¯ç°åœ¨è‹¹æœåº”ç”¨é‡Œé¢ä¸å°‘ä½¿ç”¨å‰ç«¯çš„åŸå› ã€‚æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆç½‘é¡µåˆä¸èƒ½åŸå°ä¸åŠ¨çš„åµŒå…¥åˆ°åº”ç”¨é‡Œï¼Œå› ä¸ºä½ é€šè¿‡æµè§ˆå™¨æµè§ˆçš„è¯ï¼Œä»–æœ€èµ·ç æœ‰å¯¼èˆªæ ä»€ä¹ˆä»€ä¹ˆçš„ï¼Œä½†æ˜¯ä½ çš„åº”ç”¨å·²ç»æœ‰ï¼Œæˆ–è€…ä¸éœ€è¦æœ‰æŸäº›å…ƒç´ ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ æ‰ï¼Œé‚£ä¹ˆçš„è¯ï¼Œå°±æ¶‰åŠåˆ°äº†äº¤äº’ã€‚è¯åˆè¯´å›æ¥ï¼Œåœ¨å“ªé‡Œç”¨åˆ°çš„äº¤äº’æ¯”è¾ƒå¤šï¼Ÿç”µå•†ç±»åº”ç”¨ï¼Œå› ä¸ºå•†å“çš„è¯¦æƒ…ä¼šé¢‘ç¹å˜åŠ¨ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å°±éœ€è¦ä½¿ç”¨ç½‘é¡µï¼Œä»åº”ç”¨çš„è§’åº¦çœ‹å°±æ˜¯äºŒçº§é¡µé¢ã€‚ï¼ˆä¸€çº§é¡µé¢æ˜¯ç”¨OC/Swiftåœ¨åšï¼‰</font>

<h2 id="ä»å¤§ä¼—ç‚¹è¯„çš„å›¢è´­ç•Œé¢è¯´èµ·"><a href="#ä»å¤§ä¼—ç‚¹è¯„çš„å›¢è´­ç•Œé¢è¯´èµ·" class="headerlink" title="ä»å¤§ä¼—ç‚¹è¯„çš„å›¢è´­ç•Œé¢è¯´èµ·"></a>ä»å¤§ä¼—ç‚¹è¯„çš„å›¢è´­ç•Œé¢è¯´èµ·</h2><font size="2">è¿™é‡Œç”¨çš„ç½‘å€æ˜¯ï¼š â€˜<a href="https://m.dianping.com/tuan/deal/5501525" target="_blank" rel="external">https://m.dianping.com/tuan/deal/5501525</a>â€˜</font><br><font size="2">é•¿è¿™ä¸ªæ ·å­</font>

<p><img src="Img/1.png" alt=""><br><img src="Img/2.png" alt=""></p>
<font size="3"> éœ€æ±‚æ˜¯è¿™æ ·å­çš„ï¼šç½‘é¡µä¸Šé¢çš„å¯¼èˆªæ¡ï¼Œåº•éƒ¨çš„APPä¸‹å•è¿”ç§¯åˆ†ï¼Œè¿˜æœ‰é¡µé¢çš„åº•éƒ¨çš„é•¿æ¡è¦å»æ‰ã€‚è¿˜æœ‰å°±æ˜¯å¤´éƒ¨çš„å¤§å›¾ç‰‡è¦è·³è½¬åˆ°iOSçš„æ§åˆ¶å™¨</font>

<h3 id="åœ¨viewDidloadåŠ è½½webView"><a href="#åœ¨viewDidloadåŠ è½½webView" class="headerlink" title="åœ¨viewDidloadåŠ è½½webView"></a>åœ¨viewDidloadåŠ è½½webView</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">self.webView.delegate = self;</div><div class="line"></div><div class="line">// åŠ è½½ç½‘é¡µæ•°æ®</div><div class="line">NSURL *URL = [NSURL URLWithString:@&quot;http://m.dianping.com/tuan/deal/5501525&quot;];</div><div class="line">NSURLRequest *request = [NSURLRequest requestWithURL:URL];</div><div class="line">[self.webView loadRequest:request];</div></pre></td></tr></table></figure>
<h3 id="éšåéµå®ˆä»£ç†ï¼Œæ‰§è¡Œä¸¤ä¸ªä»£ç†æ–¹æ³•"><a href="#éšåéµå®ˆä»£ç†ï¼Œæ‰§è¡Œä¸¤ä¸ªä»£ç†æ–¹æ³•" class="headerlink" title="éšåéµå®ˆä»£ç†ï¼Œæ‰§è¡Œä¸¤ä¸ªä»£ç†æ–¹æ³•"></a>éšåéµå®ˆä»£ç†ï¼Œæ‰§è¡Œä¸¤ä¸ªä»£ç†æ–¹æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//ç½‘é¡µåŠ è½½å®Œæˆä¹‹åè°ƒç”¨çš„ä»£ç†æ–¹æ³•ã€‚  åœ¨è¿™é‡Œä½¿ç”¨JSæ³¨å…¥ï¼šå³OCè°ƒç”¨JSä»£ç </div><div class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView;</div><div class="line"></div><div class="line">//ç½‘é¡µå³å°†å¼€å§‹åŠ è½½æ—¶è°ƒç”¨çš„ä»£ç†æ–¹æ³•ï¼šå¯ä»¥æ‹¦æˆªåˆ°webViewä¸Šæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ã€‚  åœ¨è¿™é‡Œå¯ä»¥é—´æ¥ç”¨JSé—´æ¥çš„è°ƒç”¨OC</div><div class="line">- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;</div></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªä»£ç†æ–¹æ³•"><a href="#å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªä»£ç†æ–¹æ³•" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªä»£ç†æ–¹æ³•"></a>å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªä»£ç†æ–¹æ³•</h3><blockquote>
<pre><code>ç¬¬ä¸€ä¸ªä»£ç†æ–¹æ³•ã€‚æ—¢ç„¶æ˜¯å»ä¸œè¥¿ï¼Œè€Œé‚£ä¸ªä¸œè¥¿åˆæ˜¯JSå†™çš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨JSå»æ‰ã€‚æ‰€ä»¥è¦åœ¨è¿™ä¸ªä»£ç†æ–¹æ³•é‡Œé¢ç”¨OCè°ƒç”¨JSä»£ç ï¼Œç„¶åå†æ³¨å…¥åˆ°é‚£ä¸ªç½‘é¡µé‡Œã€‚    

ç¬¬äºŒä¸ªä»£ç†æ–¹æ³•ã€‚æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œæˆ‘å…ˆåœ¨ä»£ç†é‡Œé¢æ‹¦æˆªåˆ°è¯·æ±‚çš„è·¯å¾„ ï¼Œç„¶åç”¨å‡è·¯å¾„åŒ¹é…ï¼ˆè‚¯å®šæ˜¯åŒ¹é…ä¸æˆåŠŸçš„ï¼‰ï¼ŒåŒ¹é…ä¸æˆåŠŸçš„è¯ï¼Œè¦åšçš„å°±æ˜¯åœ¨è¿™é‡Œè·³åˆ°è‡ªå·±çš„æ§åˆ¶å™¨é‡Œã€‚è¿™å°±æ˜¯OCä¸ç½‘é¡µçš„åµŒå¥—ä½¿ç”¨ã€‚
</code></pre></blockquote>
<h3 id="ä»£ç çš„æ¼”ç¤º"><a href="#ä»£ç çš„æ¼”ç¤º" class="headerlink" title="ä»£ç çš„æ¼”ç¤º"></a>ä»£ç çš„æ¼”ç¤º</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)webViewDidFinishLoad:(UIWebView *)webView</div><div class="line">&#123;</div><div class="line">    // ç”¨äºæ‹¼æ¥JSä»£ç çš„å­—ç¬¦ä¸²</div><div class="line">    NSMutableString *stringM = [NSMutableString string];</div><div class="line"></div><div class="line">    /*</div><div class="line">        è¿™é‡Œä¸è®²JSçš„ä»£ç ï¼Œè‡ªå·±çœ‹çœ‹å°±å¥½ã€‚ä¸»è¦è°ˆçš„å°±æ˜¯å¦‚ä½•äº¤äº’</div><div class="line">    */</div><div class="line"></div><div class="line">    // æ‹¼æ¥ç§»é™¤é¡¶éƒ¨å¯¼èˆªçš„JSä»£ç ,è¿™é‡Œ</div><div class="line">    [stringM appendString:@&quot;var headerTag = document.getElementsByTagName(&apos;header&apos;)[0]; headerTag.parentNode.removeChild(headerTag);&quot;];</div><div class="line">    // æ‹¼æ¥ç§»é™¤æ©™è‰²æŒ‰é’®çš„JSä»£ç </div><div class="line">    [stringM appendString:@&quot;var footerBtnTag = document.getElementsByClassName(&apos;footer-btn-fix&apos;)[0]; footerBtnTag.parentNode.removeChild(footerBtnTag);&quot;];</div><div class="line">    // æ‹¼æ¥ç§»é™¤åº•éƒ¨å¸ƒå±€çš„JSä»£ç </div><div class="line">    [stringM appendString:@&quot;var footerTag = document.getElementsByClassName(&apos;footer&apos;)[0]; footerTag.parentNode.removeChild(footerTag);&quot;];</div><div class="line">    // æ‹¼æ¥ç»™imgæ ‡ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„JSä»£ç </div><div class="line">    [stringM appendString:@&quot;var imgTag = document.getElementsByTagName(&apos;figure&apos;)[0].children[0]; imgTag.onclick = function()&#123;window.location.href=&apos;hm://www.yaowoya.com&apos;&#125;;&quot;];</div><div class="line"></div><div class="line">    // è¿™ä¸ªæ–¹æ³•å°±æ˜¯UIWebViewæä¾›çš„.ä¸“é—¨åšJSæ³¨å…¥çš„æ–¹æ³•</div><div class="line">    [webView stringByEvaluatingJavaScriptFromString:stringM];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType</div><div class="line">&#123;</div><div class="line">    // è·å–æ‹¦æˆªåˆ°çš„æ‰€æœ‰çš„è¯·æ±‚</div><div class="line">    NSString *URLString = request.URL.absoluteString;</div><div class="line"></div><div class="line">    if ([URLString isEqualToString:@&quot;hm://www.yaowoya.com&quot;]) &#123;</div><div class="line"></div><div class="line">        // å½“æˆ‘çŸ¥é“ç‚¹å‡»çš„æ˜¯imgTagæ—¶,è‡ªåŠ¨push</div><div class="line">        TestViewController *testVC = [[TestViewController alloc] init];</div><div class="line">        [self.navigationController pushViewController:testVC animated:YES];</div><div class="line"></div><div class="line">        // å› ä¸ºè¿™ä¸ªåœ°å€æ˜¯æ— æ•ˆåœ°å€.ä¸éœ€è¦åŠ è½½çš„</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // è¿”å›YESçš„ä½œç”¨ : è¡¨ç¤ºä½ æ‹¦æˆªåˆ°çš„è¯·æ±‚,å…è®¸æ­£å¸¸çš„å‘é€å‡ºå»;åä¹‹,ä¸å…è®¸æ‹¦æˆªåˆ°çš„è¯·æ±‚å‘é€å‡ºå»</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-FMDBçš„ä½¿ç”¨" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/16/FMDBçš„ä½¿ç”¨/" class="article-date">
      <time datetime="2016-10-16T11:00:39.000Z" itemprop="datePublished">2016-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/16/FMDBçš„ä½¿ç”¨/">FMDBçš„ç®€ç•¥ä½¿ç”¨æ–¹æ³•</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>  ç®—æ˜¯é¼“æ£äº†å¥½å¤šå¤©ï¼Œæ‰æŠŠè¿™ä¸ªåšå®¢â€™åšâ€™å‡ºæ¥ï¼ŒğŸ˜Œï¼Œå› ä¸ºæœ€è¿‘æŒºå¿™çš„å‘€ã€‚è¿˜æœ‰æˆ‘è™½ç„¶å¾ˆä¹…ä»¥å‰å°±è¢«åŠå‘Šä½¿ç”¨md.ä½†æ˜¯ç”±äºæ‡’çš„å¤©æ€§ï¼Œä¸€ç›´æ²¡ç”¨è¿‡ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå˜¿å˜¿ã€‚</p>
<h2 id="FMDBçš„ç®€ç•¥ä½¿ç”¨æ–¹æ³•"><a href="#FMDBçš„ç®€ç•¥ä½¿ç”¨æ–¹æ³•" class="headerlink" title="FMDBçš„ç®€ç•¥ä½¿ç”¨æ–¹æ³•"></a>FMDBçš„ç®€ç•¥ä½¿ç”¨æ–¹æ³•</h2><p>å…ˆç®€å•çš„è¯´ä¸€ä¸‹FMDBä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„çš„ä¸œè¥¿</p>
<blockquote>
<ol>
<li>FMDBæœ€å¸¸ç”¨çš„ä¸‰ä¸ªç±»æ—¶ FMDatabase / FMResultSet FMDatabaseQueue</li>
<li>å¦‚æœä½ è¦åœ¨ â€˜å¤šçº¿ç¨‹â€™ ç¯å¢ƒä¸‹æ“ä½œæ•°æ®åº“,ä¸€å®šè¦ä½¿ç”¨ FMDatabaseQueue</li>
<li>åœ¨å¤šçº¿ç¨‹é‡Œé¢ä»…ä»…ä½¿ç”¨ FMDatabase æ˜¯ä¸ªåä¸»æ„</li>
<li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹,ä½¿ç”¨ FMDatabaseQueue æ›¿ä»£ FMDatabase</li>
</ol>
</blockquote>
<p>FMDBåŸºæœ¬ä½¿ç”¨æµç¨‹</p>
<blockquote>
<ol>
<li>åˆ›å»ºé˜Ÿåˆ—,è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹åˆ›å»ºå¥½ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶å¹¶æ‰“å¼€</li>
<li><p>é˜Ÿåˆ—å¯¹è±¡è°ƒç”¨inDatabaseæ–¹æ³•.å›è°ƒæ•°æ®åº“å¥æŸ„,æ‹¿åˆ°æ•°æ®åº“å¥æŸ„ä¹‹å,å°±å¯ä»¥æ“ä½œæ•°æ®åº“æ–‡ä»¶ ï¼ˆä¸‹é¢çš„dbå°±æ˜¯å¥æŸ„ï¼‰</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[queue inDatabase:^(FMDatabase *db) &#123;</div><div class="line">[db executeUpdate:@&quot;INSERT INTO myTable VALUES (?)&quot;, [NSNumber numberWithInt:1]];</div></pre></td></tr></table></figure>
</li>
<li><p>å¢åˆ æŸ¥æ”¹å·´æ‹‰å·´æ‹‰â€¦â€¦</p>
</li>
</ol>
</blockquote>
<h2 id="æ­£å¼çš„æ­¥éª¤"><a href="#æ­£å¼çš„æ­¥éª¤" class="headerlink" title="æ­£å¼çš„æ­¥éª¤"></a>æ­£å¼çš„æ­¥éª¤</h2><h3 id="cocoapodså¯¼å…¥"><a href="#cocoapodså¯¼å…¥" class="headerlink" title="cocoapodså¯¼å…¥"></a>cocoapodså¯¼å…¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pod <span class="string">'FMDB'</span></div><div class="line">pod installğŸ™ƒ</div></pre></td></tr></table></figure>
<h3 id="å°è£…FMDBå•ä¾‹ï¼Œç»§æ‰¿FMDatabaseQueue"><a href="#å°è£…FMDBå•ä¾‹ï¼Œç»§æ‰¿FMDatabaseQueue" class="headerlink" title="å°è£…FMDBå•ä¾‹ï¼Œç»§æ‰¿FMDatabaseQueue"></a>å°è£…FMDBå•ä¾‹ï¼Œç»§æ‰¿FMDatabaseQueue</h3><blockquote>
<p>å•ä¾‹é‡Œåšä¸‰ä»¶äº‹</p>
<pre><code>1. è·¯å¾„çš„è®¾ç½®
2. å®ä¾‹åŒ–
3. æ•°æ®åŒ–çš„åˆ›å»º
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">+ (instancetype)sharedManager</div><div class="line">&#123;</div><div class="line">    static FMDatabaseQueueManager *instance;</div><div class="line"></div><div class="line">    static dispatch_once_t onceToken;</div><div class="line">    dispatch_once(&amp;onceToken, ^&#123;</div><div class="line"></div><div class="line">        // æ•°æ®åº“æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</div><div class="line">        NSString *dbPath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES).lastObject stringByAppendingPathComponent:@<span class="string">"HM2102.db"</span>];</div><div class="line"></div><div class="line">        // å®ä¾‹åŒ–å•ä¾‹queueå’Œåˆ›å»ºå¹¶æ‰“å¼€æ•°æ®åº“æ–‡ä»¶</div><div class="line">        instance = [self databaseQueueWithPath:dbPath];</div><div class="line"></div><div class="line">        // å»ºè¡¨</div><div class="line">        [instance <span class="keyword">in</span>Database:^(FMDatabase *db) &#123;</div><div class="line"></div><div class="line">            // 1.å»ºè¡¨SQLè¯­å¥</div><div class="line">            NSString *createSQL = @<span class="string">"create table if  not exists t_person(id integer primary key not null,name text,age integer);"</span>;</div><div class="line">            // 2.æ‰§è¡Œå»ºè¡¨SQLè¯­å¥</div><div class="line">            BOOL isCreate = [db executeUpdate:createSQL];</div><div class="line">            <span class="keyword">if</span> (isCreate) &#123;</div><div class="line">                NSLog(@<span class="string">"å»ºè¡¨æˆåŠŸ"</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                NSLog(@<span class="string">"å»ºè¡¨å¤±è´¥"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;];</div><div class="line"></div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="built_in">return</span> instance;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
<h3 id="ä½¿ç”¨é¢„ç¼–è¯‘æŒ‡ä»¤æ¥æ”¹åŠ¨æ•°æ®"><a href="#ä½¿ç”¨é¢„ç¼–è¯‘æŒ‡ä»¤æ¥æ”¹åŠ¨æ•°æ®" class="headerlink" title="ä½¿ç”¨é¢„ç¼–è¯‘æŒ‡ä»¤æ¥æ”¹åŠ¨æ•°æ®"></a>ä½¿ç”¨é¢„ç¼–è¯‘æŒ‡ä»¤æ¥æ”¹åŠ¨æ•°æ®</h3><blockquote>
<pre><code>è‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®è¢«â€™SQLæ³¨å…¥ï¼Œè¿›è¡Œç¯¡æ”¹ã€‚
å¦‚æœä¸è¿™æ ·çš„è¯ï¼ŒSQLè¯­å¥æœ¬èº«æ˜¯ä»¥â€˜;â€™ç»“æŸçš„ï¼Œç©æ„è¢«æå‰æ³¨å…¥å°±ä¼šå‡ºç°æ•°æ®ä¸¢å¤±ï¼Œæå‰ç»“æŸï¼Œè¢«ç›—ç­‰ç­‰å¯èƒ½ã€‚è¿™æ ·åšå³ä¾¿è¢«æ³¨å…¥åï¼Œä¹Ÿå¯ä»¥é˜²æ­¢ä¸Šé¢çš„ç°è±¡å‘ç”Ÿï¼Œåœ¨å¤§æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½çŸ¥é“æ˜¯å“ªäº›æ•°æ®å‡ºäº†é—®é¢˜
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">- (void)insert</div><div class="line">&#123;</div><div class="line">    NSString *name = @<span class="string">"name"</span>;</div><div class="line"></div><div class="line">    [[FMDatabaseQueueManager sharedManager] <span class="keyword">in</span>Database:^(FMDatabase *db) &#123;</div><div class="line">        // 1.æ–°å¢SQLè¯­å¥</div><div class="line">        NSString *insertSQL = @<span class="string">"insert into t_person(name,age) values(?,?);"</span>;</div><div class="line"></div><div class="line">        NSLog(@<span class="string">"%@"</span>,insertSQL);</div><div class="line"></div><div class="line">        // 2.æ‰§è¡Œæ–°å¢SQLè¯­å¥</div><div class="line">        BOOL isInsert = [db executeUpdate:insertSQL,name,@(18)];</div><div class="line">        <span class="keyword">if</span> (isInsert) &#123;</div><div class="line">            NSLog(@<span class="string">"æ–°å¢æˆåŠŸ"</span>);</div><div class="line"></div><div class="line">        // è·å–å½±å“çš„è¡Œæ•°å’Œæœ€åçš„id</div><div class="line">        int row = db.changes;</div><div class="line">        long long RowId = db.lastInsertRowId;</div><div class="line">        NSLog(@<span class="string">"%d-%lld"</span>,row,RowId);</div><div class="line"></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            NSLog(@<span class="string">"æ–°å¢å¤±è´¥"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
<h3 id="æ‰€è°“â€™äº‹åŠ¡â€™"><a href="#æ‰€è°“â€™äº‹åŠ¡â€™" class="headerlink" title="æ‰€è°“â€™äº‹åŠ¡â€™"></a>æ‰€è°“â€™äº‹åŠ¡â€™</h3><blockquote>
<pre><code>ä½œç”¨ : å¤§æ‰¹é‡æ•°æ®æ“ä½œæ—¶ä½¿ç”¨,æé«˜æ•°æ®åº“æ“ä½œçš„æ€§èƒ½å’Œå®‰å…¨
æ¯”è¾ƒ :
ä¸å¼€å¯äº‹åŠ¡æ—¶,æ¯æ¬¡æ‰§è¡Œæ’å…¥è¯­å¥éƒ½ä¼šå»ºç«‹ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶å‰¯æœ¬
å¼€å¯äº‹åŠ¡æ—¶,åªéœ€è¦å»ºç«‹ä¸€æ¬¡æ•°æ®åº“æ–‡ä»¶å‰¯æœ¬
æ­¥éª¤ :
å¤§æ‰¹é‡æ“ä½œæ•°æ®ä¹‹å‰,å¼€å¯äº‹åŠ¡
å¤§æ‰¹é‡æ“ä½œæ•°æ®ä¹‹å,æäº¤äº‹åŠ¡
ä¸€æ—¦æ•°æ®æ“ä½œé”™è¯¯,å›æ»šäº‹åŠ¡
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (void)shiwu</div><div class="line">&#123;</div><div class="line">    // æ–°å¢SQLè¯­å¥ : å†™åœ¨å¤–é¢ä¸ä¼šé‡å¤åˆ›å»ºåŒæ ·çš„SQLè¯­å¥</div><div class="line">    NSString *insertSQL = @<span class="string">"insert into t_person(name,age) values(?,?);"</span>;</div><div class="line"></div><div class="line">    // ä½¿ç”¨å•ä¾‹ï¼Œå»ºç«‹æ•°æ®åº“æ–‡ä»¶å¿«ç…§</div><div class="line">    [[FMDatabaseQueueManager sharedManager] <span class="keyword">in</span>Transaction:^(FMDatabase *db, BOOL *rollback)&#123;</div><div class="line"></div><div class="line">        // åœ¨ä¸€ä¸ªå¿«ç…§é‡Œé¢,å¾ªç¯çš„å¤§æ‰¹é‡æ’å…¥æ•°æ®</div><div class="line">        <span class="keyword">for</span> (NSInteger i = 0; i &lt; 1000; i++) &#123;</div><div class="line">            // æ‰§è¡Œæ–°å¢SQLè¯­å¥</div><div class="line">            BOOL isInsert = [db executeUpdate:insertSQL,@<span class="string">"å“ˆå“ˆ"</span>,@(18)];</div><div class="line">            // å¦‚æœå‡ºé”™</div><div class="line">            <span class="keyword">if</span> (!isInsert) &#123;</div><div class="line">                // å¦‚æœå‡ºé”™å°±å›æ»šäº‹åŠ¡</div><div class="line">                *rollback = YES;</div><div class="line">                <span class="built_in">return</span>; // <span class="built_in">break</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        // æ¨¡æ‹Ÿå‡ºé”™</div><div class="line">        /*</div><div class="line">            <span class="keyword">if</span> (i == 10) &#123;</div><div class="line">                // å¦‚æœå‡ºé”™å°±å›æ»šäº‹åŠ¡</div><div class="line">                *rollback = YES;</div><div class="line">                <span class="built_in">return</span>; // <span class="built_in">break</span>;</div><div class="line">            &#125;</div><div class="line">        */</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 éƒå¯Œæ°
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >æ¸¸å®¢åˆ°è®¿æ•°: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>